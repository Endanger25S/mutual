<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>


<form data-v-ebcc336a="" class="el-form el-form--inline">
    <div data-v-ebcc336a="" class="el-form-item el-form-item--small"><label
            class="el-form-item__label" style="width: 140px;">输入搜索：</label>
        <div class="el-form-item__content">
            <div data-v-ebcc336a="" class="input-width el-input el-input--small"><!---->
                <input id="order_sn"
                    type="text" autocomplete="off" placeholder="订单编号"
                    class="el-input__inner"><!----><!----><!----></div><!----></div>
    </div>
    <div data-v-ebcc336a="" class="el-form-item el-form-item--small"><label
            class="el-form-item__label" style="width: 140px;">收货人：</label>
        <div class="el-form-item__content">
            <div data-v-ebcc336a="" class="input-width el-input el-input--small"><!---->
                <input id="member"
                    type="text" autocomplete="off" placeholder="收货人姓名/手机号码"
                    class="el-input__inner"><!----><!----><!----></div><!----></div>
    </div>
    <div data-v-ebcc336a="" class="el-form-item el-form-item--small"><label
            class="el-form-item__label" style="width: 140px;">提交时间：</label>
        <div class="el-form-item__content">
            <div data-v-ebcc336a=""
                 class="el-date-editor input-width el-input el-input--small el-input--prefix el-input--suffix el-date-editor--date">
                <!----><input id="create_time" type="text" autocomplete="off" name="" placeholder="请选择时间"
                              class="el-input__inner"><span class="el-input__prefix"><i
                    class="el-input__icon el-icon-date"></i><!----></span><span
                    class="el-input__suffix"><span class="el-input__suffix-inner"><i
                    class="el-input__icon"></i><!----></span><!----></span><!----></div>
            <!----></div>
    </div>
    <div data-v-ebcc336a="" class="el-form-item el-form-item--small"><label
            class="el-form-item__label" style="width: 140px;">订单状态：</label>
        <div class="el-form-item__content">
            <div data-v-ebcc336a="" class="el-select input-width el-select--small">
                <!---->
                <div class="el-input el-input--small el-input--suffix"><!---->
                    <input id="status"
                        type="text" autocomplete="off" placeholder="全部"
                        readonly="readonly" class="el-input__inner"><!----><span
                        class="el-input__suffix"><span class="el-input__suffix-inner"><i
                        class="el-select__caret el-input__icon el-icon-arrow-up"></i>
                    <!----></span><!----></span><!----></div>
                <div class="el-select-dropdown el-popper"
                     style="display: none; min-width: 203px;">
                    <div class="el-scrollbar" style="">
                        <div class="el-select-dropdown__wrap el-scrollbar__wrap"
                             style="margin-bottom: -15px; margin-right: -15px;">
                            <ul class="el-scrollbar__view el-select-dropdown__list">
                                <!---->
                                <li data-v-ebcc336a="" class="el-select-dropdown__item">
                                    <span>待付款</span></li>
                                <li data-v-ebcc336a="" class="el-select-dropdown__item">
                                    <span>待发货</span></li>
                                <li data-v-ebcc336a="" class="el-select-dropdown__item">
                                    <span>已发货</span></li>
                                <li data-v-ebcc336a="" class="el-select-dropdown__item">
                                    <span>已完成</span></li>
                                <li data-v-ebcc336a="" class="el-select-dropdown__item">
                                    <span>已关闭</span></li>
                            </ul>
                        </div>
                        <div class="el-scrollbar__bar is-horizontal">
                            <div class="el-scrollbar__thumb"
                                 style="transform: translateX(0%);"></div>
                        </div>
                        <div class="el-scrollbar__bar is-vertical">
                            <div class="el-scrollbar__thumb"
                                 style="transform: translateY(0%);"></div>
                        </div>
                    </div><!----></div>
            </div><!----></div>
    </div>
    <div data-v-ebcc336a="" class="el-form-item el-form-item--small"><label
            class="el-form-item__label" style="width: 140px;">订单分类：</label>
        <div class="el-form-item__content">
            <div data-v-ebcc336a="" class="el-select input-width el-select--small">
                <!---->
                <div class="el-input el-input--small el-input--suffix"><!---->
                    <input id="order_type"
                        type="text" autocomplete="off" placeholder="全部"
                        readonly="readonly" class="el-input__inner"><!----><span
                        class="el-input__suffix"><span class="el-input__suffix-inner"><i
                        class="el-select__caret el-input__icon el-icon-arrow-up"></i>
                    <!----></span><!----></span><!----></div>
                <div class="el-select-dropdown el-popper"
                     style="display: none; min-width: 203px;">
                    <div class="el-scrollbar" style="">
                        <div class="el-select-dropdown__wrap el-scrollbar__wrap"
                             style="margin-bottom: -15px; margin-right: -15px;">
                            <ul class="el-scrollbar__view el-select-dropdown__list">
                                <!---->
                                <li data-v-ebcc336a="" class="el-select-dropdown__item">
                                    <span>正常订单</span></li>
                                <li data-v-ebcc336a="" class="el-select-dropdown__item">
                                    <span>秒杀订单</span></li>
                            </ul>
                        </div>
                        <div class="el-scrollbar__bar is-horizontal">
                            <div class="el-scrollbar__thumb"
                                 style="transform: translateX(0%);"></div>
                        </div>
                        <div class="el-scrollbar__bar is-vertical">
                            <div class="el-scrollbar__thumb"
                                 style="transform: translateY(0%);"></div>
                        </div>
                    </div><!----></div>
            </div><!----></div>
    </div>
    <div data-v-ebcc336a="" class="el-form-item el-form-item--small"><label
            class="el-form-item__label" style="width: 140px;">订单来源：</label>
        <div class="el-form-item__content">
            <div data-v-ebcc336a="" class="el-select input-width el-select--small">
                <!---->
                <div class="el-input el-input--small el-input--suffix"><!---->
                    <input id="source_type"
                        type="text" autocomplete="off" placeholder="全部"
                        readonly="readonly" class="el-input__inner"><!----><span
                        class="el-input__suffix"><span class="el-input__suffix-inner"><i
                        class="el-select__caret el-input__icon el-icon-arrow-up"></i>
                    <!----></span><!----></span><!----></div>
                <div class="el-select-dropdown el-popper"
                     style="display: none; min-width: 203px;">
                    <div class="el-scrollbar" style="">
                        <div class="el-select-dropdown__wrap el-scrollbar__wrap"
                             style="margin-bottom: -15px; margin-right: -15px;">
                            <ul class="el-scrollbar__view el-select-dropdown__list">
                                <!---->
                                <li data-v-ebcc336a="" class="el-select-dropdown__item">
                                    <span>PC订单</span></li>
                                <li data-v-ebcc336a="" class="el-select-dropdown__item">
                                    <span>APP订单</span></li>
                            </ul>
                        </div>
                        <div class="el-scrollbar__bar is-horizontal">
                            <div class="el-scrollbar__thumb"
                                 style="transform: translateX(0%);"></div>
                        </div>
                        <div class="el-scrollbar__bar is-vertical">
                            <div class="el-scrollbar__thumb"
                                 style="transform: translateY(0%);"></div>
                        </div>
                    </div><!----></div>
            </div><!----></div>
    </div>
    <input onclick="searchOmsOrder()" type="button" value="提交">
</form>


<table cellspacing="0" cellpadding="0" border="0" class="el-table__body"
       style="width: 1444px;">
<!--此节点下存放订单项-->
<tbody id="omsOrderBody">
</tbody>
</table>


<script src="../../jquery/jquery-2.1.1.min.js"></script>
<script>
    /**
     * 加载网页是调用
     */
    $(function () {
        //管理员获取所有订单信息
        $.ajax({
            type: 'GET',
            url: "/listAllOmsOrderByAdmin",
            contentType:"application/json",
            success: function(data){
                console.log(data);
                appendStrByOmsOrder(data);
            },
            error:function (data) {
                console.error(data);
            },
            dataType: "json"
        });
    });

    function searchOmsOrder() {
        var order_sn = $("#order_sn").val();
        var member = $("#member").val();
        var create_time = $("#create_time").val();
        var status = $("#status").val();
        var order_type = $("#order_type").val();
        var source_type = $("#source_type").val();
        $.ajax({
            type: 'POST',
            url: "/searchOmsOrder",
            contentType:"application/json",
            data:JSON.stringify({
                "order_sn" : order_sn,
                "member" : member,
                "create_time" : create_time,
                "status" : status,
                "order_type" : order_type,
                "source_type" : source_type
            }),
            success: function(data){
                console.log(data);
                window.location.href = "";
            },
            error:function (data) {
                console.error(data);
            },
            dataType: "json"
        });
    }

    /**
     * 循环添加订单项信息节点
     * @param data
     */
    function appendStrByOmsOrder(data) {
        var roleTbody = $("#omsOrderBody");
        roleTbody.empty();
        var str;
        $(data).each(function (index, item) {
            str = "<tr id=\"omsOrderBodyTr_"+ item.id +"\" class=\"el-table__row\">\n" +
                "    <td class=\"el-table_2_column_10 is-center el-table-column--selection\">\n" +
                "        <div class=\"cell\">\n" +
                "            <label role=\"checkbox\" class=\"el-checkbox\">\n" +
                "                <span aria-checked=\"mixed\" class=\"el-checkbox__input\">\n" +
                "                    <span class=\"el-checkbox__inner\"></span>\n" +
                "                    <input type=\"checkbox\" aria-hidden=\"true\" class=\"el-checkbox__original\">\n" +
                "                </span>\n" +
                "            </label>\n" +
                "        </div>\n" +
                "    </td>\n" +
                "    <td class=\"el-table_2_column_11 is-center \">\n" +
                "        <div class=\"cell\">"+ item.id +"</div>\n" +
                "    </td>\n" +
                "    <td class=\"el-table_2_column_12 is-center \">\n" +
                "        <div class=\"cell\">"+ item.order_sn +"</div>\n" +
                "    </td>\n" +
                "    <td class=\"el-table_2_column_13 is-center \">\n" +
                "        <div class=\"cell\">"+ item.create_time +"</div>\n" +
                "    </td>\n" +
                "    <td class=\"el-table_2_column_14 is-center \">\n" +
                "        <div class=\"cell\">"+ item.member_username +"</div>\n" +
                "    </td>\n" +
                "    <td class=\"el-table_2_column_15 is-center \">\n" +
                "        <div class=\"cell\">￥"+ item.total_amount +"</div>\n" +
                "    </td>\n" +
                "    <td class=\"el-table_2_column_16 is-center \">\n" +
                "        <div class=\"cell\">"+ item.pay_type +"</div>\n" +
                "    </td>\n" +
                "    <td class=\"el-table_2_column_17 is-center \">\n" +
                "        <div class=\"cell\">"+ item.source_type +"</div>\n" +
                "    </td>\n" +
                "    <td class=\"el-table_2_column_18 is-center \">\n" +
                "        <div class=\"cell\">"+ item.status +"</div>\n" +
                "    </td>\n" +
                "    <td class=\"el-table_2_column_19 is-center \">\n" +
                "        <div class=\"cell\">\n" +
                "            <button onclick=\"showOmsOrderById("+ item.id +")\" data-v-ebcc336a=\"\" type=\"button\" class=\"el-button el-button--default el-button--mini\">\n" +
                "                <span>查看订单</span>\n" +
                "            </button>\n" +
                "            <button data-v-ebcc336a=\"\" type=\"button\" class=\"el-button el-button--default el-button--mini\">\n" +
                "                <span>关闭订单</span>\n" +
                "            </button>\n" +
                "            <button data-v-ebcc336a=\"\" type=\"button\" class=\"el-button el-button--default el-button--mini\">\n" +
                "                <span>订单发货</span>\n" +
                "            </button>\n" +
                "            <button data-v-ebcc336a=\"\" type=\"button\" class=\"el-button el-button--default el-button--mini\">\n" +
                "                <span>订单跟踪</span>\n" +
                "            </button>\n" +
                "            <button onclick=\"removeOmsOrderById("+ item.id +")\" data-v-ebcc336a=\"\" type=\"button\" class=\"el-button el-button--danger el-button--mini\">\n" +
                "                <span>删除订单</span>\n" +
                "            </button>\n" +
                "        </div>\n" +
                "    </td>\n" +
                "</tr>";
            roleTbody.append(str);
        });
    }

    /**
     * 根据订单id查询订单信息
     * @param omsOrderId
     */
    function showOmsOrderById(omsOrderId) {
        $.ajax({
            type: 'GET',
            url: "/showOmsOrderById?osmOrderId="+omsOrderId,
            contentType:"application/json",
            success: function(data){
                console.log(data);
                window.location.href = "";
            },
            error:function (data) {
                console.error(data);
            },
            dataType: "json"
        });
    }


    function removeOmsOrderById(omsOrderId) {
        $.ajax({
            type: 'POST',
            url: "/deleteOmsOrderById?osmOrderId="+omsOrderId,
            contentType:"application/json",
            success: function(data){
                console.log(data);
                $("#omsOrderBodyTr_"+omsOrderId).remove();
            },
            error:function (data) {
                console.error(data);
            },
            dataType: "json"
        });
    }




</script>

</body>
</html>